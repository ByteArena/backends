<!DOCTYPE html>
<head>
<meta charset="utf-8">
</head>
<body>

<button id="open">Connect</button>
<button id="close" style="display: none;">Close</button>
<hr />

<div id="visualization"></div>
<hr />
<div id="output"></div>

<script src="js/libs/pixi.min.js"></script>
<script src="js/libs/jquery.slim.min.js"></script>
<script src="js/app.js"></script>
<script>

PIXI.loader
    .add("images/circle.png")
    .load(function() {

    //Create the renderer
    var renderer = PIXI.autoDetectRenderer(1000, 600, { antialias: true });
    $('#visualization').append(renderer.view);

    var stage = new PIXI.Container();

    window.onStateUpdate = function(points) {
        stage.removeChildren();

        points.Agents.forEach((agent) => {
            var sprite = new PIXI.Sprite(
                PIXI.loader.resources["images/circle.png"].texture
            );

            sprite.x = agent.X;
            sprite.y = agent.Y;
            sprite.width = 32;
            sprite.height = 32;
            sprite.tint = agent.Kind === 'attractor' ? 0x0000FF : 0xFF0000;

            //Create a container object called the `stage`
            stage.addChild(sprite);
        })
    };

    // Loop till the end of times
    const loop = function() {
        renderer.render(stage);
        window.requestAnimationFrame(loop);
    };
    loop();

  });

</script>
</body>
</html>
